(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8848],{70205:(e,t,r)=>{"use strict";r.d(t,{Q:()=>h});var n=r(73556),s=r(5820),a=r(87567),o=r(54756),i=r.n(o),c=r(96540),u=r(97208);let l=function(){var e=(0,c.useState)(),t=e[0],r=e[1],n=(0,c.useState)(!0),s=n[0],a=n[1],o=function(){for(var e={},t=0;t<sessionStorage.length;t++){var r=sessionStorage.key(t);if(r)try{var n=JSON.parse(sessionStorage.getItem(r)),s=n.value,a=n.expiry;a&&Date.now()>a?sessionStorage.removeItem(r):e[r]=s}catch(t){e[r]=sessionStorage.getItem(r)}}return Object.keys(e).length?e:null},i=function(){r(o()),a(!1)};return(0,c.useEffect)(function(){if("complete"!==document.readyState&&"interactive"!==document.readyState)return window.addEventListener("DOMContentLoaded",i),function(){return window.removeEventListener("DOMContentLoaded",i)};i()},[]),{sessionData:t,loading:s,setSessionItem:function(e,t,r){try{var n={value:t,expiry:null!=r&&r.expiry?Date.now()+r.expiry:null};sessionStorage.setItem(e,JSON.stringify(n))}catch(e){console.error("Failed to set session storage item:",e)}},deleteSessionItem:function(e){sessionStorage.removeItem(e)}}};var d=r(13861),f=r(27515);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(){var e=f.A.merchant.mid,t=(0,u.cQ)("IProductService"),r=l(),n=r.sessionData,o=r.setSessionItem,p=(0,c.useState)(null),h=p[0],m=p[1],b=(0,c.useState)(!1),g=b[0],O=b[1],y=(0,c.useState)(!1),S=y[0],w=y[1],_=(0,c.useState)(null),j=_[0],x=_[1],k=(0,d.pn)(),P=(0,a.A)(k,2),D=(P[0],P[1]),E=(0,c.useCallback)((0,s.A)(i().mark(function r(){var s,a,c,u,l,d,f,p;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(g||h)){r.next=2;break}return r.abrupt("return");case 2:if(a=(s=null==n?void 0:n.products)&&Date.now()-s.created>6e4,c=function(t){if(t)return t.filter(function(t){return t.metadata.mid==e})},!(s&&!a)){r.next=11;break}(u=c(s.data))&&m(u),w(s.has_more),r.next=28;break;case 11:return D({active:!0}),O(!0),r.prev=13,r.next=16,t.getProducts({limit:10});case 16:null!=(l=r.sent)&&l.data&&(d=v(v({},l),{},{created:Date.now()}),f=l.data.filter(function(e){return null==e?void 0:e.active}),o("products",d,{expiry:6e4}),(p=c(f))&&m(p),w(l.has_more)),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(13),console.error(r.t0),x("Failed to fetch products.");case 24:return r.prev=24,D({active:!1}),O(!1),r.finish(24);case 28:case"end":return r.stop()}},r,null,[[13,20,24,28]])})),[g,h]);return(0,c.useEffect)(function(){E()},[E]),{products:h,loading:g,hasMore:S,error:j,fetchProducts:E}}},27955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67538),s=r.n(n);r(96540);var a=[];a.__hash="3867722346";var o=r(70205),i=r(74848);let c=function(){var e=(0,o.Q)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s(),{id:a.__hash,children:a}),(0,i.jsx)("div",{className:"jsx-".concat(a.__hash)+" build",children:JSON.stringify(e)})]})}},94485:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/build",function(){return r(27955)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(94485)),_N_E=e.O()}]);