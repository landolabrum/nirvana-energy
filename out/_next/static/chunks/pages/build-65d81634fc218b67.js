(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5881],{19522:function(e,t,r){"use strict";r.d(t,{r:function(){return h}});var n=r(59499),o=r(50029),s=r(16835),a=r(64687),i=r.n(a),c=r(67294),u=r(92629),f=function(){var e=(0,c.useState)(),t=e[0],r=e[1],n=(0,c.useState)(!0),o=n[0],s=n[1],a=function(){for(var e={},t=0;t<sessionStorage.length;t++){var r=sessionStorage.key(t);if(r)try{var n=JSON.parse(sessionStorage.getItem(r)),o=n.value,s=n.expiry;s&&Date.now()>s?sessionStorage.removeItem(r):e[r]=o}catch(t){e[r]=sessionStorage.getItem(r)}}return Object.keys(e).length?e:null},i=function(){r(a()),s(!1)};return(0,c.useEffect)(function(){if("complete"!==document.readyState&&"interactive"!==document.readyState)return window.addEventListener("DOMContentLoaded",i),function(){return window.removeEventListener("DOMContentLoaded",i)};i()},[]),{sessionData:t,loading:o,setSessionItem:function(e,t,r){try{var n={value:t,expiry:null!=r&&r.expiry?Date.now()+r.expiry:null};sessionStorage.setItem(e,JSON.stringify(n))}catch(e){console.error("Failed to set session storage item:",e)}},deleteSessionItem:function(e){sessionStorage.removeItem(e)}}},l=r(8591),d=r(38228);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(){var e=d.Z.merchant.mid,t=(0,u.ko)("IProductService"),r=f(),n=r.sessionData,a=r.setSessionItem,p=(0,c.useState)(null),h=p[0],m=p[1],b=(0,c.useState)(!1),g=b[0],O=b[1],y=(0,c.useState)(!1),S=y[0],w=y[1],_=(0,c.useState)(null),j=_[0],x=_[1],k=(0,l.U2)(),P=(0,s.Z)(k,2),D=(P[0],P[1]),E=(0,c.useCallback)((0,o.Z)(i().mark(function r(){var o,s,c,u,f,l,d,p;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(g||h)){r.next=2;break}return r.abrupt("return");case 2:if(s=(o=null==n?void 0:n.products)&&Date.now()-o.created>6e4,c=function(t){if(t)return t.filter(function(t){return t.metadata.mid==e})},!(o&&!s)){r.next=11;break}(u=c(o.data))&&m(u),w(o.has_more),r.next=28;break;case 11:return D({active:!0}),O(!0),r.prev=13,r.next=16,t.getProducts({limit:10});case 16:null!=(f=r.sent)&&f.data&&(l=v(v({},f),{},{created:Date.now()}),d=f.data.filter(function(e){return null==e?void 0:e.active}),a("products",l,{expiry:6e4}),(p=c(d))&&m(p),w(f.has_more)),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(13),console.error(r.t0),x("Failed to fetch products.");case 24:return r.prev=24,D({active:!1}),O(!1),r.finish(24);case 28:case"end":return r.stop()}},r,null,[[13,20,24,28]])})),[g,h]);return(0,c.useEffect)(function(){E()},[E]),{products:h,loading:g,hasMore:S,error:j,fetchProducts:E}}},58850:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(40135),o=r.n(n);r(67294);var s=[];s.__hash="3867722346";var a=r(19522),i=r(85893),c=function(){var e=(0,a.r)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o(),{id:s.__hash,children:s}),(0,i.jsx)("div",{className:"jsx-".concat(s.__hash)+" build",children:JSON.stringify(e)})]})}},54907:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/build",function(){return r(58850)}])}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=54907)}),_N_E=e.O()}]);